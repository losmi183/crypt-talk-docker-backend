import{Q as u}from"./QInput-c1ZgeY1b.js";import{a3 as h,r,J as y,M as R,N as d,a2 as b,O as V,V as n,R as a,T as P,S as k,a4 as p}from"./index-CgK1ss-b.js";import{Q as q}from"./QForm-CXM5rvQk.js";import{Q as x}from"./QPage-CMn3O1sP.js";import{u as Q}from"./auth-oFsSJgPH.js";import"./use-dark-zJL703uH.js";const _={class:"auth-container q-pa-lg q-pa-md-md q-pa-sm-lg shadow-3 rounded-borders"},z={__name:"ResetPasswordPage",setup(B){const i=Q(),m=V(),c=h().params.forgot_password_token,t=r(""),l=r(""),w=s=>s?.trim().length>=4||"Password must have at least 4 characters",f=s=>s===t.value||"Passwords do not match",g=r(null);async function v(){try{await i.resetPassword(t.value,c),p.create({type:"positive",message:"Your password reseted.",position:"top-right",timeout:3e3}),m.push("/login")}catch(s){console.error("Reset password error:",s);const e=s.response?.data?.message||"Reset password failed";g.value=e,p.create({type:"negative",message:e,position:"top-right",timeout:3e3})}}return(s,e)=>(R(),y(x,{class:b(["flex flex-center",s.$q.dark.isActive?"bg-dark":"bg-grey-2"])},{default:d(()=>[n("div",_,[a(q,{onSubmit:P(v,["prevent"]),class:"column q-gutter-md"},{default:d(()=>[e[2]||(e[2]=n("div",{class:"text-h5 text-center text-primary q-mb-sm"},"Reset password",-1)),a(u,{filled:"",modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value=o),label:"password",type:"password",rules:[w],class:"full-width"},null,8,["modelValue","rules"]),a(u,{filled:"",modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value=o),label:"repeat password",type:"password",rules:[f],class:"full-width"},null,8,["modelValue","rules"]),a(k,{label:"Send recovery link",type:"submit",color:"primary",class:"full-width q-py-sm"})]),_:1})])]),_:1},8,["class"]))}};export{z as default};
